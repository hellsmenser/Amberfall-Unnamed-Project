@echo off
echo üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º...

REM –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
for /f "delims=" %%f in ('git diff --cached --name-only --diff-filter=ACM ^| findstr /R "\.py$"') do (
    set "files=%%f %files%"
)

REM –ï—Å–ª–∏ –Ω–µ—Ç Python-—Ñ–∞–π–ª–æ–≤, –≤—ã—Ö–æ–¥–∏–º
if not defined files (
    echo ‚úÖ –ù–µ—Ç —Ñ–∞–π–ª–æ–≤ Python –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.
    exit /b 0
)

REM –ó–∞–ø—É—Å–∫–∞–µ–º flake8
flake8 %files%

REM –ï—Å–ª–∏ flake8 –Ω–∞—à–µ–ª –æ—à–∏–±–∫–∏, –∑–∞–ø—Ä–µ—â–∞–µ–º –∫–æ–º–º–∏—Ç
if errorlevel 1 (
    echo ‚ùå –õ–∏–Ω—Ç–µ—Ä –æ–±–Ω–∞—Ä—É–∂–∏–ª –æ—à–∏–±–∫–∏. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º.
    exit /b 1
)

echo ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –Ω–∞—à—ë–ª –æ—à–∏–±–æ–∫. –ö–æ–º–º–∏—Ç —Ä–∞–∑—Ä–µ—à—ë–Ω.
exit /b 0
